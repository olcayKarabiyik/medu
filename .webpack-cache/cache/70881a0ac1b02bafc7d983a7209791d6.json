{"remainingRequest":"/wiki/node_modules/babel-loader/lib/index.js??ref--0-1!/wiki/node_modules/vue-loader/lib/index.js??vue-loader-options!/wiki/client/components/editor/editor-asciidoc.vue?vue&type=script&lang=js&","dependencies":[{"path":"/wiki/client/components/editor/editor-asciidoc.vue","mtime":1716084843878},{"path":"/wiki/.babelrc","mtime":1716084843827},{"path":"/wiki/node_modules/cache-loader/dist/cjs.js","mtime":1716088090639},{"path":"/wiki/node_modules/babel-loader/lib/index.js","mtime":1716088089693},{"path":"/wiki/node_modules/vue-loader/lib/index.js","mtime":1716088146939}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zZXQgZnJvbSAibG9kYXNoL3NldCI7CmltcG9ydCBfbGFzdCBmcm9tICJsb2Rhc2gvbGFzdCI7CmltcG9ydCBfc3RhcnRzV2l0aCBmcm9tICJsb2Rhc2gvc3RhcnRzV2l0aCI7CmltcG9ydCBfdGltZXMgZnJvbSAibG9kYXNoL3RpbWVzIjsKaW1wb3J0IF9mbGF0dGVuIGZyb20gImxvZGFzaC9mbGF0dGVuIjsKaW1wb3J0IF9kZWJvdW5jZSBmcm9tICJsb2Rhc2gvZGVib3VuY2UiOwppbXBvcnQgeyBnZXQsIHN5bmMgfSBmcm9tICd2dWV4LXBhdGhpZnknOwppbXBvcnQgRE9NUHVyaWZ5IGZyb20gJ2RvbXB1cmlmeSc7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8gSU1QT1JUUwovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIENvZGUgTWlycm9yCgppbXBvcnQgQ29kZU1pcnJvciBmcm9tICdjb2RlbWlycm9yJzsKaW1wb3J0ICdjb2RlbWlycm9yL2xpYi9jb2RlbWlycm9yLmNzcyc7IC8vIExhbmd1YWdlCgppbXBvcnQgJ2NvZGVtaXJyb3ItYXNjaWlkb2MnOyAvLyBBZGRvbnMKCmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9zZWxlY3Rpb24vYWN0aXZlLWxpbmUuanMnOwppbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vZGlzcGxheS9mdWxsc2NyZWVuLmpzJzsKaW1wb3J0ICdjb2RlbWlycm9yL2FkZG9uL2Rpc3BsYXkvZnVsbHNjcmVlbi5jc3MnOwppbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vc2VsZWN0aW9uL21hcmstc2VsZWN0aW9uLmpzJzsKaW1wb3J0ICdjb2RlbWlycm9yL2FkZG9uL3NlYXJjaC9zZWFyY2hjdXJzb3IuanMnOwppbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vaGludC9zaG93LWhpbnQuanMnOwppbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vZm9sZC9mb2xkY29kZS5qcyc7CmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9mb2xkL2ZvbGRndXR0ZXIuanMnOwppbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vZm9sZC9mb2xkZ3V0dGVyLmNzcyc7CmltcG9ydCBjbUZvbGQgZnJvbSAnLi9jb21tb24vY21Gb2xkJzsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyBJTklUCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCmNvbnN0IGFzY2lpZG9jdG9yID0gcmVxdWlyZSgnYXNjaWlkb2N0b3InKSgpOwoKY29uc3QgY2hlZXJpbyA9IHJlcXVpcmUoJ2NoZWVyaW8nKTsgLy8gUGxhdGZvcm0gZGV0ZWN0aW9uCgoKY29uc3QgQ3RybEtleSA9IC9NYWMvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKSA/ICdDbWQnIDogJ0N0cmwnOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIEhFTFBFUiBGVU5DVElPTlMKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKY21Gb2xkLnJlZ2lzdGVyKCdhc2NpaWRvYycpOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIFZ1ZSBDb21wb25lbnQKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjbTogbnVsbCwKICAgICAgY3Vyc29yUG9zOiB7CiAgICAgICAgY2g6IDAsCiAgICAgICAgbGluZTogMQogICAgICB9LAogICAgICBwcmV2aWV3U2hvd246IHRydWUsCiAgICAgIC8vIFRPRE8KICAgICAgaW5zZXJ0TGlua0RpYWxvZzogZmFsc2UsCiAgICAgIGhlbHBTaG93bjogZmFsc2UsCiAgICAgIHByZXZpZXdIVE1MOiAnJwogICAgfTsKICB9LAoKICBjb21wdXRlZDogewogICAgaXNNb2JpbGUoKSB7CiAgICAgIHJldHVybiB0aGlzLiR2dWV0aWZ5LmJyZWFrcG9pbnQuc21BbmREb3duOwogICAgfSwKCiAgICBpc01vZGFsU2hvd24oKSB7CiAgICAgIHJldHVybiB0aGlzLmhlbHBTaG93biB8fCB0aGlzLmFjdGl2ZU1vZGFsICE9PSAnJzsKICAgIH0sCgogICAgbG9jYWxlOiBnZXQoJ3BhZ2UvbG9jYWxlJyksCiAgICBwYXRoOiBnZXQoJ3BhZ2UvcGF0aCcpLAogICAgbW9kZTogZ2V0KCdlZGl0b3IvbW9kZScpLAogICAgYWN0aXZlTW9kYWw6IHN5bmMoJ2VkaXRvci9hY3RpdmVNb2RhbCcpCiAgfSwKICBtZXRob2RzOiB7CiAgICB0b2dnbGVNb2RhbChrZXkpIHsKICAgICAgdGhpcy5hY3RpdmVNb2RhbCA9IHRoaXMuYWN0aXZlTW9kYWwgPT09IGtleSA/ICcnIDoga2V5OwogICAgICB0aGlzLmhlbHBTaG93biA9IGZhbHNlOwogICAgfSwKCiAgICBjbG9zZUFsbE1vZGFsKCkgewogICAgICB0aGlzLmFjdGl2ZU1vZGFsID0gJyc7CiAgICAgIHRoaXMuaGVscFNob3duID0gZmFsc2U7CiAgICB9LAoKICAgIG9uQ21JbnB1dDogX2RlYm91bmNlKGZ1bmN0aW9uIChuZXdDb250ZW50KSB7CiAgICAgIHRoaXMucHJvY2Vzc0NvbnRlbnQobmV3Q29udGVudCk7CiAgICB9LCA2MDApLAoKICAgIHByb2Nlc3NDb250ZW50KG5ld0NvbnRlbnQpIHsKICAgICAgdGhpcy5wcm9jZXNzTWFya2Vycyh0aGlzLmNtLmZpcnN0TGluZSgpLCB0aGlzLmNtLmxhc3RMaW5lKCkpOwogICAgICBsZXQgaHRtbCA9IGFzY2lpZG9jdG9yLmNvbnZlcnQobmV3Q29udGVudCwgewogICAgICAgIHN0YW5kYWxvbmU6IGZhbHNlLAogICAgICAgIHNhZmU6ICdzYWZlJywKICAgICAgICBhdHRyaWJ1dGVzOiB7CiAgICAgICAgICBzaG93dGl0bGU6IHRydWUsCiAgICAgICAgICBpY29uczogJ2ZvbnQnCiAgICAgICAgfQogICAgICB9KTsKICAgICAgY29uc3QgJCA9IGNoZWVyaW8ubG9hZChodG1sLCB7CiAgICAgICAgZGVjb2RlRW50aXRpZXM6IHRydWUKICAgICAgfSk7CiAgICAgICQoJ3ByZS5oaWdobGlnaHQgPiBjb2RlLmxhbmd1YWdlLWRpYWdyYW0nKS5lYWNoKChpLCBlbG0pID0+IHsKICAgICAgICBjb25zdCBkaWFncmFtQ29udGVudCA9IEJ1ZmZlci5mcm9tKCQoZWxtKS5odG1sKCksICdiYXNlNjQnKS50b1N0cmluZygpOwogICAgICAgICQoZWxtKS5wYXJlbnQoKS5yZXBsYWNlV2l0aChgPHByZSBjbGFzcz0iZGlhZ3JhbSI+JHtkaWFncmFtQ29udGVudH08L2Rpdj5gKTsKICAgICAgfSk7CiAgICAgIHRoaXMucHJldmlld0hUTUwgPSBET01QdXJpZnkuc2FuaXRpemUoJC5odG1sKCksIHsKICAgICAgICBBRERfVEFHUzogWydmb3JlaWduT2JqZWN0J10KICAgICAgfSk7CiAgICB9LAoKICAgIC8qKgogICAgICogSW5zZXJ0IGNvbnRlbnQgYXQgY3Vyc29yCiAgICAgKi8KICAgIGluc2VydEF0Q3Vyc29yKHsKICAgICAgY29udGVudAogICAgfSkgewogICAgICBjb25zdCBjdXJzb3IgPSB0aGlzLmNtLmRvYy5nZXRDdXJzb3IoJ2hlYWQnKTsKICAgICAgdGhpcy5jbS5kb2MucmVwbGFjZVJhbmdlKGNvbnRlbnQsIGN1cnNvcik7CiAgICB9LAoKICAgIC8qKgogICAgICogSW5zZXJ0IGNvbnRlbnQgYWZ0ZXIgY3VycmVudCBsaW5lCiAgICAgKi8KICAgIGluc2VydEFmdGVyKHsKICAgICAgY29udGVudCwKICAgICAgbmV3TGluZQogICAgfSkgewogICAgICBjb25zdCBjdXJMaW5lID0gdGhpcy5jbS5kb2MuZ2V0Q3Vyc29yKCd0bycpLmxpbmU7CiAgICAgIGNvbnN0IGxpbmVMZW5ndGggPSB0aGlzLmNtLmRvYy5nZXRMaW5lKGN1ckxpbmUpLmxlbmd0aDsKICAgICAgdGhpcy5jbS5kb2MucmVwbGFjZVJhbmdlKG5ld0xpbmUgPyBgXG4ke2NvbnRlbnR9XG5gIDogY29udGVudCwgewogICAgICAgIGxpbmU6IGN1ckxpbmUsCiAgICAgICAgY2g6IGxpbmVMZW5ndGggKyAxCiAgICAgIH0pOwogICAgfSwKCiAgICAvKioKICAgICAqIEluc2VydCBjb250ZW50IGJlZm9yZSBjdXJyZW50IGxpbmUKICAgICAqLwogICAgaW5zZXJ0QmVmb3JlRWFjaExpbmUoewogICAgICBjb250ZW50LAogICAgICBhZnRlcgogICAgfSkgewogICAgICBsZXQgbGluZXMgPSBbXTsKCiAgICAgIGlmICghdGhpcy5jbS5kb2Muc29tZXRoaW5nU2VsZWN0ZWQoKSkgewogICAgICAgIGxpbmVzLnB1c2godGhpcy5jbS5kb2MuZ2V0Q3Vyc29yKCdoZWFkJykubGluZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGluZXMgPSBfZmxhdHRlbih0aGlzLmNtLmRvYy5saXN0U2VsZWN0aW9ucygpLm1hcChzbCA9PiB7CiAgICAgICAgICBjb25zdCByYW5nZSA9IE1hdGguYWJzKHNsLmFuY2hvci5saW5lIC0gc2wuaGVhZC5saW5lKSArIDE7CiAgICAgICAgICBjb25zdCBsb3dlc3RMaW5lID0gc2wuYW5jaG9yLmxpbmUgPiBzbC5oZWFkLmxpbmUgPyBzbC5oZWFkLmxpbmUgOiBzbC5hbmNob3IubGluZTsKICAgICAgICAgIHJldHVybiBfdGltZXMocmFuZ2UsIGwgPT4gbCArIGxvd2VzdExpbmUpOwogICAgICAgIH0pKTsKICAgICAgfQoKICAgICAgbGluZXMuZm9yRWFjaChsbiA9PiB7CiAgICAgICAgbGV0IGxpbmVDb250ZW50ID0gdGhpcy5jbS5kb2MuZ2V0TGluZShsbik7CiAgICAgICAgY29uc3QgbGluZUxlbmd0aCA9IGxpbmVDb250ZW50Lmxlbmd0aDsKCiAgICAgICAgaWYgKF9zdGFydHNXaXRoKGxpbmVDb250ZW50LCBjb250ZW50KSkgewogICAgICAgICAgbGluZUNvbnRlbnQgPSBsaW5lQ29udGVudC5zdWJzdHJpbmcoY29udGVudC5sZW5ndGgpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5jbS5kb2MucmVwbGFjZVJhbmdlKGNvbnRlbnQgKyBsaW5lQ29udGVudCwgewogICAgICAgICAgbGluZTogbG4sCiAgICAgICAgICBjaDogMAogICAgICAgIH0sIHsKICAgICAgICAgIGxpbmU6IGxuLAogICAgICAgICAgY2g6IGxpbmVMZW5ndGgKICAgICAgICB9KTsKICAgICAgfSk7CgogICAgICBpZiAoYWZ0ZXIpIHsKICAgICAgICBjb25zdCBsYXN0TGluZSA9IF9sYXN0KGxpbmVzKTsKCiAgICAgICAgdGhpcy5jbS5kb2MucmVwbGFjZVJhbmdlKGBcbiR7YWZ0ZXJ9XG5gLCB7CiAgICAgICAgICBsaW5lOiBsYXN0TGluZSwKICAgICAgICAgIGNoOiB0aGlzLmNtLmRvYy5nZXRMaW5lKGxhc3RMaW5lKS5sZW5ndGggKyAxCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCgogICAgLyoqCiAgICAgKiBVcGRhdGUgY3Vyc29yIHN0YXRlCiAgICAgKi8KICAgIHBvc2l0aW9uU3luYyhjbSkgewogICAgICB0aGlzLmN1cnNvclBvcyA9IGNtLmdldEN1cnNvcignaGVhZCcpOwogICAgfSwKCiAgICB0b2dnbGVNYXJrdXAoewogICAgICBzdGFydCwKICAgICAgZW5kCiAgICB9KSB7CiAgICAgIGlmICghZW5kKSB7CiAgICAgICAgZW5kID0gc3RhcnQ7CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy5jbS5kb2Muc29tZXRoaW5nU2VsZWN0ZWQoKSkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5jb21taXQoJ3Nob3dOb3RpZmljYXRpb24nLCB7CiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdlZGl0b3I6bWFya3VwLm5vU2VsZWN0aW9uRXJyb3InKSwKICAgICAgICAgIHN0eWxlOiAnd2FybmluZycsCiAgICAgICAgICBpY29uOiAnd2FybmluZycKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdGhpcy5jbS5kb2MucmVwbGFjZVNlbGVjdGlvbnModGhpcy5jbS5kb2MuZ2V0U2VsZWN0aW9ucygpLm1hcChzID0+IHN0YXJ0ICsgcyArIGVuZCkpOwogICAgfSwKCiAgICBzZXRIZWFkZXJMaW5lKGx2bCkgewogICAgICBjb25zdCBjdXJMaW5lID0gdGhpcy5jbS5kb2MuZ2V0Q3Vyc29yKCdoZWFkJykubGluZTsKICAgICAgbGV0IGxpbmVDb250ZW50ID0gdGhpcy5jbS5kb2MuZ2V0TGluZShjdXJMaW5lKTsKICAgICAgY29uc3QgbGluZUxlbmd0aCA9IGxpbmVDb250ZW50Lmxlbmd0aDsKCiAgICAgIGlmIChfc3RhcnRzV2l0aChsaW5lQ29udGVudCwgJz0nKSkgewogICAgICAgIGxpbmVDb250ZW50ID0gbGluZUNvbnRlbnQucmVwbGFjZSgvXig9KyApLywgJycpOwogICAgICB9CgogICAgICBsaW5lQ29udGVudCA9IF90aW1lcyhsdmwsIG4gPT4gJz0nKS5qb2luKCcnKSArIGAgYCArIGxpbmVDb250ZW50OwogICAgICB0aGlzLmNtLmRvYy5yZXBsYWNlUmFuZ2UobGluZUNvbnRlbnQsIHsKICAgICAgICBsaW5lOiBjdXJMaW5lLAogICAgICAgIGNoOiAwCiAgICAgIH0sIHsKICAgICAgICBsaW5lOiBjdXJMaW5lLAogICAgICAgIGNoOiBsaW5lTGVuZ3RoCiAgICAgIH0pOwogICAgfSwKCiAgICB0b2dnbGVGdWxsc2NyZWVuKCkgewogICAgICB0aGlzLmNtLnNldE9wdGlvbignZnVsbFNjcmVlbicsIHRydWUpOwogICAgfSwKCiAgICByZWZyZXNoKCkgewogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy5jbS5yZWZyZXNoKCk7CiAgICAgIH0pOwogICAgfSwKCiAgICBpbnNlcnRMaW5rKCkgewogICAgICB0aGlzLmluc2VydExpbmtEaWFsb2cgPSB0cnVlOwogICAgfSwKCiAgICBpbnNlcnRMaW5rSGFuZGxlcih7CiAgICAgIGxvY2FsZSwKICAgICAgcGF0aAogICAgfSkgewogICAgICBjb25zdCBsYXN0UGFydCA9IF9sYXN0KHBhdGguc3BsaXQoJy8nKSk7CgogICAgICB0aGlzLmluc2VydEF0Q3Vyc29yKHsKICAgICAgICBjb250ZW50OiBzaXRlTGFuZ3MubGVuZ3RoID4gMCA/IGBsaW5rOi8ke2xvY2FsZX0vJHtwYXRofVske2xhc3RQYXJ0fV1gIDogYGxpbms6LyR7cGF0aH1bJHtsYXN0UGFydH1dYAogICAgICB9KTsKICAgIH0sCgogICAgcHJvY2Vzc01hcmtlcnMoZnJvbSwgdG8pIHsKICAgICAgbGV0IGZvdW5kID0gbnVsbDsKICAgICAgbGV0IGZvdW5kU3RhcnQgPSAwOwogICAgICB0aGlzLmNtLmRvYy5nZXRBbGxNYXJrcygpLmZvckVhY2gobWsgPT4gewogICAgICAgIGlmIChtay5fX2tpbmQpIHsKICAgICAgICAgIG1rLmNsZWFyKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5jbS5lYWNoTGluZShmcm9tLCB0bywgbG4gPT4gewogICAgICAgIGNvbnN0IGxpbmUgPSBsbi5saW5lTm8oKTsKCiAgICAgICAgaWYgKGxuLnRleHQuc3RhcnRzV2l0aCgnYGBgZGlhZ3JhbScpKSB7CiAgICAgICAgICBmb3VuZCA9ICdkaWFncmFtJzsKICAgICAgICAgIGZvdW5kU3RhcnQgPSBsaW5lOwogICAgICAgIH0gZWxzZSBpZiAobG4udGV4dCA9PT0gJ2BgYCcgJiYgZm91bmQpIHsKICAgICAgICAgIHN3aXRjaCAoZm91bmQpIHsKICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgIC8vIC0+IERJQUdSQU0KICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgIGNhc2UgJ2RpYWdyYW0nOgogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmIChsaW5lIC0gZm91bmRTdGFydCAhPT0gMikgewogICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhpcy5hZGRNYXJrZXIoewogICAgICAgICAgICAgICAgICBraW5kOiAnZGlhZ3JhbScsCiAgICAgICAgICAgICAgICAgIGZyb206IHsKICAgICAgICAgICAgICAgICAgICBsaW5lOiBmb3VuZFN0YXJ0LAogICAgICAgICAgICAgICAgICAgIGNoOiAzCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIHRvOiB7CiAgICAgICAgICAgICAgICAgICAgbGluZTogZm91bmRTdGFydCwKICAgICAgICAgICAgICAgICAgICBjaDogMTAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgdGV4dDogJ0VkaXQgRGlhZ3JhbScsCiAgICAgICAgICAgICAgICAgIGFjdGlvbjogKChzdGFydCwgZW5kKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV2ID0+IHsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY20uZG9jLnNldFNlbGVjdGlvbih7CiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmU6IHN0YXJ0LAogICAgICAgICAgICAgICAgICAgICAgICBjaDogMAogICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICBsaW5lOiBlbmQsCiAgICAgICAgICAgICAgICAgICAgICAgIGNoOiAzCiAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByYXcgPSB0aGlzLmNtLmRvYy5nZXRMaW5lKGVuZCAtIDEpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5zZXQoJ2VkaXRvci9hY3RpdmVNb2RhbERhdGEnLCBCdWZmZXIuZnJvbShyYXcsICdiYXNlNjQnKS50b1N0cmluZygpKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVNb2RhbChgZWRpdG9yTW9kYWxEcmF3aW9gKTsKICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuY29tbWl0KCdzaG93Tm90aWZpY2F0aW9uJywgewogICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gcHJvY2VzcyBkaWFncmFtIGRhdGEuJywKICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogJ3dhcm5pbmcnLAogICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICd3YXJuaW5nJwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICB9KShmb3VuZFN0YXJ0LCBsaW5lKQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYgKGxuLmhlaWdodCA+IDApIHsKICAgICAgICAgICAgICAgICAgdGhpcy5jbS5mb2xkQ29kZShmb3VuZFN0YXJ0KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgZm91bmQgPSBudWxsOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIGFkZE1hcmtlcih7CiAgICAgIGtpbmQsCiAgICAgIGZyb20sCiAgICAgIHRvLAogICAgICB0ZXh0LAogICAgICBhY3Rpb24KICAgIH0pIHsKICAgICAgY29uc3QgbWFya2VyRWxtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICBtYXJrZXJFbG0uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dCkpOwogICAgICBtYXJrZXJFbG0uY2xhc3NOYW1lID0gJ0NvZGVNaXJyb3ItYnV0dG9ubWFya2VyJzsKICAgICAgbWFya2VyRWxtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWN0aW9uKTsKICAgICAgdGhpcy5jbS5tYXJrVGV4dChmcm9tLCB0bywgewogICAgICAgIHJlcGxhY2VkV2l0aDogbWFya2VyRWxtLAogICAgICAgIF9fa2luZDoga2luZAogICAgICB9KTsKICAgIH0KCiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuJHN0b3JlLnNldCgnZWRpdG9yL2VkaXRvcktleScsICdhc2NpaWRvYycpOwoKICAgIGlmICh0aGlzLm1vZGUgPT09ICdjcmVhdGUnKSB7CiAgICAgIHRoaXMuJHN0b3JlLnNldCgnZWRpdG9yL2NvbnRlbnQnLCAnPT0gaGVhZGVyXG5cbmNvbnRlbnQnKTsKICAgIH0gLy8gSW5pdGlhbGl6ZSBDb2RlTWlycm9yCgoKICAgIHRoaXMuY20gPSBDb2RlTWlycm9yLmZyb21UZXh0QXJlYSh0aGlzLiRyZWZzLmNtLCB7CiAgICAgIHRhYlNpemU6IDIsCiAgICAgIG1vZGU6ICdhc2NpaWRvYycsCiAgICAgIHRoZW1lOiAnd2lraWpzLWRhcmsnLAogICAgICBsaW5lTnVtYmVyczogdHJ1ZSwKICAgICAgbGluZVdyYXBwaW5nOiB0cnVlLAogICAgICBsaW5lOiB0cnVlLAogICAgICBzdHlsZUFjdGl2ZUxpbmU6IHRydWUsCiAgICAgIGhpZ2hsaWdodFNlbGVjdGlvbk1hdGNoZXM6IHsKICAgICAgICBhbm5vdGF0ZVNjcm9sbGJhcjogdHJ1ZQogICAgICB9LAogICAgICB2aWV3cG9ydE1hcmdpbjogNTAsCiAgICAgIGlucHV0U3R5bGU6ICdjb250ZW50ZWRpdGFibGUnLAogICAgICBhbGxvd0Ryb3BGaWxlVHlwZXM6IFsnaW1hZ2UvanBnJywgJ2ltYWdlL3BuZycsICdpbWFnZS9zdmcnLCAnaW1hZ2UvanBlZycsICdpbWFnZS9naWYnXSwKICAgICAgZGlyZWN0aW9uOiBzaXRlQ29uZmlnLnJ0bCA/ICdydGwnIDogJ2x0cicsCiAgICAgIGZvbGRHdXR0ZXI6IHRydWUsCiAgICAgIGd1dHRlcnM6IFsnQ29kZU1pcnJvci1saW5lbnVtYmVycycsICdDb2RlTWlycm9yLWZvbGRndXR0ZXInXQogICAgfSk7CiAgICB0aGlzLmNtLnNldFZhbHVlKHRoaXMuJHN0b3JlLmdldCgnZWRpdG9yL2NvbnRlbnQnKSk7CiAgICB0aGlzLmNtLm9uKCdjaGFuZ2UnLCBjID0+IHsKICAgICAgdGhpcy4kc3RvcmUuc2V0KCdlZGl0b3IvY29udGVudCcsIGMuZ2V0VmFsdWUoKSk7CiAgICAgIHRoaXMub25DbUlucHV0KHRoaXMuJHN0b3JlLmdldCgnZWRpdG9yL2NvbnRlbnQnKSk7CiAgICB9KTsKCiAgICBpZiAodGhpcy4kdnVldGlmeS5icmVha3BvaW50Lm1kQW5kVXApIHsKICAgICAgdGhpcy5jbS5zZXRTaXplKG51bGwsICdjYWxjKDEwMHZoIC0gMTM3cHgpJyk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLmNtLnNldFNpemUobnVsbCwgJ2NhbGMoMTAwdmggLSAxMTJweCAtIDE2cHgpJyk7CiAgICB9IC8vIFNldCBLZXliaW5kaW5ncwoKCiAgICBjb25zdCBrZXlCaW5kaW5ncyA9IHsKICAgICAgJ0YxMScoYykgewogICAgICAgIGMuc2V0T3B0aW9uKCdmdWxsU2NyZWVuJywgIWMuZ2V0T3B0aW9uKCdmdWxsU2NyZWVuJykpOwogICAgICB9LAoKICAgICAgJ0VzYycoYykgewogICAgICAgIGlmIChjLmdldE9wdGlvbignZnVsbFNjcmVlbicpKSBjLnNldE9wdGlvbignZnVsbFNjcmVlbicsIGZhbHNlKTsKICAgICAgfQoKICAgIH07CgogICAgX3NldChrZXlCaW5kaW5ncywgYCR7Q3RybEtleX0tQmAsIGMgPT4gewogICAgICB0aGlzLnRvZ2dsZU1hcmt1cCh7CiAgICAgICAgc3RhcnQ6IGAqKmAKICAgICAgfSk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0pOwoKICAgIF9zZXQoa2V5QmluZGluZ3MsIGAke0N0cmxLZXl9LUlgLCBjID0+IHsKICAgICAgdGhpcy50b2dnbGVNYXJrdXAoewogICAgICAgIHN0YXJ0OiBgX19gCiAgICAgIH0pOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9KTsKCiAgICB0aGlzLmNtLnNldE9wdGlvbignZXh0cmFLZXlzJywga2V5QmluZGluZ3MpOyAvLyBIYW5kbGUgY3Vyc29yIG1vdmVtZW50CgogICAgdGhpcy5jbS5vbignY3Vyc29yQWN0aXZpdHknLCBjID0+IHsKICAgICAgdGhpcy5wb3NpdGlvblN5bmMoYyk7CiAgICB9KTsgLy8gUmVuZGVyIGluaXRpYWwgcHJldmlldwoKICAgIHRoaXMucHJvY2Vzc0NvbnRlbnQodGhpcy4kc3RvcmUuZ2V0KCdlZGl0b3IvY29udGVudCcpKTsKICAgIHRoaXMuJHJvb3QuJG9uKCdlZGl0b3JJbnNlcnQnLCBvcHRzID0+IHsKICAgICAgc3dpdGNoIChvcHRzLmtpbmQpIHsKICAgICAgICBjYXNlICdJTUFHRSc6CiAgICAgICAgICBsZXQgaW1nID0gYGltYWdlOjoke29wdHMucGF0aH1bJHtvcHRzLnRleHR9XWA7CiAgICAgICAgICB0aGlzLmluc2VydEF0Q3Vyc29yKHsKICAgICAgICAgICAgY29udGVudDogaW1nCiAgICAgICAgICB9KTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICdCSU5BUlknOgogICAgICAgICAgdGhpcy5pbnNlcnRBdEN1cnNvcih7CiAgICAgICAgICAgIGNvbnRlbnQ6IGBsaW5rOiR7b3B0cy5wYXRofVske29wdHMudGV4dH1dYAogICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAnRElBR1JBTSc6CiAgICAgICAgICBjb25zdCBzZWxTdGFydExpbmUgPSB0aGlzLmNtLmdldEN1cnNvcignZnJvbScpLmxpbmU7CiAgICAgICAgICBjb25zdCBzZWxFbmRMaW5lID0gdGhpcy5jbS5nZXRDdXJzb3IoJ3RvJykubGluZSArIDE7CiAgICAgICAgICB0aGlzLmNtLmRvYy5yZXBsYWNlU2VsZWN0aW9uKCdgYGBkaWFncmFtXG4nICsgb3B0cy50ZXh0ICsgJ1xuYGBgXG4nLCAnc3RhcnQnKTsKICAgICAgICAgIHRoaXMucHJvY2Vzc01hcmtlcnMoc2VsU3RhcnRMaW5lLCBzZWxFbmRMaW5lKTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9KTsgLy8gSGFuZGxlIHNhdmUgY29uZmxpY3QKCiAgICB0aGlzLiRyb290LiRvbignc2F2ZUNvbmZsaWN0JywgKCkgPT4gewogICAgICB0aGlzLnRvZ2dsZU1vZGFsKGBlZGl0b3JNb2RhbENvbmZsaWN0YCk7CiAgICB9KTsKICAgIHRoaXMuJHJvb3QuJG9uKCdvdmVyd3JpdGVFZGl0b3JDb250ZW50JywgKCkgPT4gewogICAgICB0aGlzLmNtLnNldFZhbHVlKHRoaXMuJHN0b3JlLmdldCgnZWRpdG9yL2NvbnRlbnQnKSk7CiAgICB9KTsKICB9LAoKICBiZWZvcmVEZXN0cm95KCkgewogICAgdGhpcy4kcm9vdC4kb2ZmKCdlZGl0b3JJbnNlcnQnKTsKICB9Cgp9Ow=="},null]}